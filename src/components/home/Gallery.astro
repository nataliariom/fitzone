---

import { Image } from 'astro:assets';
import GalleryImg1 from '../../assets/images/Gallery-1.jpg';
import GalleryImg2 from '../../assets/images/Gallery-2.jpg';
import GalleryImg3 from '../../assets/images/Gallery-3.jpg';
import GalleryImg4 from '../../assets/images/Gallery-4.jpg';
import GalleryImg5 from '../../assets/images/Gallery-5.jpg';

const galleryImages = [
   { src: GalleryImg1, alt: '√Årea de cardio' },
  { src: GalleryImg2, alt: 'Zona de pesas libres' },
  { src: GalleryImg3, alt: 'Espacio wellness' },
  { src: GalleryImg4, alt: 'Entrenamiento funcional' },
  { src: GalleryImg5, alt: '√Årea de estiramiento' },
];
---
<section id="d2c_gallery">
  <div class="container">
    <div class="text-center w-full md:w-11/12 lg:w-4/5 xl:w-[60%] mx-auto">
      <h2 class="d2c_title">
       Espacios que <br />
        <span class="text-outline" data-text="Gallery">Inspiran</span>
      </h2>
      <p class="w-full md:w-4/5 xl:w-3/4 mx-auto">
       Descubre cada rinc√≥n de FitZone: √°reas de cardio, peso libre, zona wellness y mucho m√°s. Dise√±ado para motivarte y lograr tu mejor versi√≥n.
      </p>
    </div>

    <!-- Carousel -->
   <div id="gallery-carousel" class="overflow-x-auto whitespace-nowrap mt-10 xl:mt-16 pb-4 scrollbar-hide scroll-smooth">
  <div class="flex gap-6 px-2 md:px-4 w-max">
    {[...galleryImages, ...galleryImages].map((item, i) => (
      <div class="relative group inline-block w-72 md:w-96 flex-shrink-0 rounded-xl overflow-hidden">
           <Image
              src={item.src}
              alt={item.alt}
              class="w-full h-90 object-cover"
              loading="lazy"
            />
<div class="absolute inset-0 bg-[#0FF207] opacity-20 z-10"></div>
</div>


    ))}
  </div>
</div>

  </div>
</section>
<script is:inline>
  const carousel = document.getElementById('gallery-carousel');
  let isTouching = false;
  let step = 1.5;
  let interval = null;

  function startAutoScroll() {
    if (interval) clearInterval(interval);
    interval = setInterval(() => {
      if (isTouching) return;

      // Si estamos cerca del final de la duplicaci√≥n
      if (carousel.scrollLeft >= carousel.scrollWidth / 2) {
        // üí° Desactiva scroll suave temporalmente para evitar el ‚Äúbrinco‚Äù
        carousel.style.scrollBehavior = 'auto';
        carousel.scrollLeft = 0;

        // ‚úÖ Reactiva scroll suave para el resto del tiempo
        requestAnimationFrame(() => {
          carousel.style.scrollBehavior = 'smooth';
        });
      }

      carousel.scrollLeft += step;
    }, 20);
  }

  function stopAutoScroll() {
    clearInterval(interval);
  }

  window.addEventListener('DOMContentLoaded', () => {
    // Aseg√∫rate de que comience en 0
    carousel.scrollLeft = 0;

    startAutoScroll();

    carousel.addEventListener('mouseenter', stopAutoScroll);
    carousel.addEventListener('mouseleave', startAutoScroll);

    carousel.addEventListener('touchstart', () => {
      isTouching = true;
    });

    carousel.addEventListener('touchend', () => {
      isTouching = false;
    });
  });
</script>
